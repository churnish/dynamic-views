/* ============================================
   RESPONSIVE STYLES - COMPACT VIEWPORT
   ============================================ */

/* Compact viewport - search below toolbar */
.search-controls-compact {
  display: none;
}

.compact-bottom-row {
  display: none;
}

.results-count-wrapper-compact {
  display: none;
}

.create-note-button-compact {
  display: none;
}

/* Hide grid during 0-width tab transitions (prevents single-column flash) */
@container (max-width: 50px) {
  .dynamic-views-grid,
  .dynamic-views-masonry {
    visibility: hidden;
  }
}

@container (max-width: 700px) and (min-width: 51px) {
  /* Stack properties on narrow cards */
  /* Compact breakpoint: move thumbnails below text previews (only for stacked thumbnails) */
  /* Thumbnail order for stacked layout - left goes above text, right stays below */
  /* Only applies inside card-content; DOM manipulation handles position when moved outside */
  /* Settings panel responsive */
  .dynamic-views {
    .controls-wrapper {
      padding: 3px 0 8px;
    }

    .width-toggle-btn {
      display: none;
    }

    &.wide,
    &.max {
      width: 100%;
      max-width: 100%;
      margin-left: 0;
      margin-right: 0;
    }

    .results-count-wrapper-compact {
      display: flex;
    }

    .create-note-button-compact {
      display: flex;
    }

    .search-controls {
      display: none !important;
    }

    .results-count-wrapper {
      display: none !important;
    }

    .create-note-button {
      display: none !important;
    }

    .settings-panel {
      max-width: 100%;
    }

    .card-properties {
      justify-content: flex-start !important;
      flex-wrap: nowrap;
    }

    .tags-wrapper,
    .path-wrapper {
      justify-content: flex-start !important;
      flex-wrap: wrap;
    }

    .card.thumbnail-stack .card-previews {
      flex-direction: column;
      flex-grow: 0;
    }

    .card.thumbnail-stack.card-thumbnail-left
      .card-previews
      :is(.card-thumbnail, .card-thumbnail-placeholder) {
      order: -1;
    }

    .setting-item-text {
      flex-direction: column !important;
      gap: var(--size-2-2);

      .setting-item-info {
        min-width: 0;
      }
    }

    .setting-text-input,
    .dropdown {
      width: 100%;
    }
  }

  .search-controls-compact {
    display: block;
    width: 100%;
    padding: 0;
    margin-top: 8px;

    .search-input-container {
      width: 100%;
      max-width: 100%;
      padding: 0;
      margin-bottom: 8px;
    }

    .desktop-search {
      width: 100%;
    }
  }

  .compact-bottom-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
  }

  .bases-view {
    .tags-wrapper,
    .path-wrapper {
      justify-content: flex-start !important;
      flex-wrap: wrap;
    }

    .card.thumbnail-stack .card-previews {
      flex-direction: column;
      flex-grow: 0;
    }

    .card.thumbnail-stack.card-thumbnail-left
      .card-previews
      :is(.card-thumbnail, .card-thumbnail-placeholder) {
      order: -1;
    }
  }

  /* Exception: preserve nowrap in subtitle scroll mode */
  body.dynamic-views-subtitle-overflow-scroll
    .dynamic-views
    .card-subtitle
    .path-wrapper,
  body.dynamic-views-subtitle-overflow-scroll
    .bases-view
    .card-subtitle
    .path-wrapper {
    flex-wrap: nowrap;
  }
}

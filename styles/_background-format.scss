/* ==================== BACKGROUND FORMAT ==================== */

/* Overlay for text readability */
.dynamic-views .card.image-format-backdrop .card-backdrop::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  backdrop-filter: blur(var(--dynamic-views-backdrop-overlay-blur, 0px));
}

/* Overlay theme: Match theme (default — also applies when no theme class set) */
body:is(
    .dynamic-views-backdrop-theme-match,
    :not(
      .dynamic-views-backdrop-theme-light,
      .dynamic-views-backdrop-theme-dark
    )
  ).theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 70) * 1%)
  );
}

body:is(
    .dynamic-views-backdrop-theme-match,
    :not(
      .dynamic-views-backdrop-theme-light,
      .dynamic-views-backdrop-theme-dark
    )
  ).theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
}

/* Overlay theme: Light (forced) */
body.dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    255 255 255 / calc(var(--dynamic-views-backdrop-overlay-light, 70) * 1%)
  );
}

/* Overlay theme: Dark (forced) */
body.dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop
  .card-backdrop::after {
  background: rgb(
    0 0 0 / calc(var(--dynamic-views-backdrop-overlay-dark, 70) * 1%)
  );
}

/* Backdrop text color overrides (light overlay → dark text) */
body.dynamic-views-backdrop-theme-light
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop),
body:is(
    .dynamic-views-backdrop-theme-match,
    :not(
      .dynamic-views-backdrop-theme-light,
      .dynamic-views-backdrop-theme-dark
    )
  ).theme-light
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop) {
  --text-normal: #222222;
  --text-muted: #333333;
  --text-faint: color-mix(in srgb, #333333 60%, transparent);
}

/* Backdrop text color overrides (dark overlay → light text) */
body.dynamic-views-backdrop-theme-dark
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop),
body:is(
    .dynamic-views-backdrop-theme-match,
    :not(
      .dynamic-views-backdrop-theme-light,
      .dynamic-views-backdrop-theme-dark
    )
  ).theme-dark
  .dynamic-views
  .card.image-format-backdrop:has(.card-backdrop) {
  --text-normal: #fafafa;
  --text-muted: #f5f5f5;
  --text-faint: color-mix(in srgb, #f5f5f5 60%, transparent);
}

/* ============================================
   PROPERTY ROW SYSTEM
   ============================================ */

/* Compact mode: stack side-by-side properties on narrow cards */
/* Compact mode: left-align right-side properties when stacked */
/* Compact mode: reset inline label order (label before content) */
/* Meta-field: scrollable container */
/* Collapsed field: hidden entirely */
/* Gap between inline property label and content */
/* Vertical layout when property labels are on top */
/* Property labels should never scroll */
/* Property content wrapper - handles scrolling and masking */
/* For inline labels: wrapper takes remaining space after label */
/* For property labels above or no property labels: wrapper takes full width */
/* During measurement: wrapper shouldn't constrain content */
/* During measurement: fields shouldn't constrain content */
/* During measurement: remove min-width to allow natural sizing */
/* Default unmeasured state: natural content width to avoid snap when measurement applies */
/* Collapsed pair partner: expand visible property to full width.
   Safety net for Bases imperative-DOM path where handleEmptyField applies
   property-collapsed after async rendering. Datacore pre-filters instead. */
/* Both pair properties collapsed: hide the empty wrapper */
/* Column mode: 50-50 split (measurement is skipped, so this is the final state) */
/* Measured state: use calculated widths from CSS variables, remove 50% cap */
/* Odd fields (left side) use --field1-width */
/* Even fields (right side) use --field2-width */
/* Measured state: wrapper fills calculated field width */
/* Property label (above mode) */
/* Property label inline - as sibling of property-content */
/* Property label color application */
/* Property text color application - with labels */
/* Property text color application - without labels */
/* Links in properties use Obsidian default colors (not property text color) */
/* Subtitle color application */
/* Text preview color application */
/* Title color application */
.dynamic-views {
  .property-pair {
    display: flex;
    flex-direction: row;
    gap: var(--size-4-3);
    width: 100%;
    min-width: 0;
  }

  .card.compact-mode .property-pair {
    flex-direction: column;
    gap: var(--size-2-2);
  }

  .card.compact-mode .property-pair .property,
  .card.compact-mode .property-pair.property-measured .property {
    max-width: 100% !important;
    flex: none;
    width: 100% !important;
  }

  .card.compact-mode .property-pair .pair-right .property-content-wrapper {
    justify-content: flex-start;
  }

  .card.compact-mode .property-pair .pair-right .property-content {
    justify-content: flex-start;
    order: 0;
  }

  .card.compact-mode .property-pair .pair-right .property-label {
    text-align: left;
  }

  .card.compact-mode .property-pair .pair-right .property-label-inline {
    order: 0;
  }

  .property {
    display: flex;
    align-items: center;
    min-width: 0;
    max-width: 100%;
    overflow-x: visible; /* Field doesn't scroll, wrapper does */
    scrollbar-width: none;
    position: relative;
    direction: ltr;
    color: var(--text-faint);
    font-family: var(--dynamic-views-property-font, inherit);
  }

  .property.property-collapsed {
    display: none;
  }

  .property:has(.property-label-inline) {
    gap: var(--size-2-2);
  }

  .property:has(.property-label) {
    flex-direction: column;
    align-items: stretch;
    overflow-x: visible; /* Override overflow - labels should not scroll */
  }

  .property:has(.property-label) .property-label {
    flex-shrink: 0;
    overflow: visible;
  }

  .property-content-wrapper {
    display: flex;
    min-width: 0;
    overflow-x: auto;
    scrollbar-width: none;
    position: relative;
  }

  .property-content-wrapper::-webkit-scrollbar {
    display: none;
  }

  .property:has(.property-label-inline) .property-content-wrapper {
    flex: 1 1 0;
    min-width: 0;
  }

  .property:has(.property-label) .property-content-wrapper,
  .property:not(:has(.property-label)):not(:has(.property-label-inline))
    .property-content-wrapper {
    width: 100%;
  }

  .property-pair.property-measuring .property-content-wrapper {
    width: auto !important;
    max-width: none !important;
    overflow-x: visible !important;
    flex: 0 1 auto !important; /* Override flex: 1 1 0 from inline label mode to allow natural sizing */
  }

  .property-pair.property-measuring .property-content {
    width: max-content !important;
    max-width: none !important;
  }

  .property-pair.property-measuring .property {
    width: auto !important;
    max-width: none !important;
    flex: 0 0 auto !important; /* Override flex: 1 1 0 to prevent equal distribution */
  }

  .property-pair.property-measuring .property-content {
    min-width: 0 !important;
  }

  .property-pair .property {
    flex: 0 1 auto;
    max-width: 50%;
  }

  .property-pair:has(> .property-collapsed)
    > .property:not(.property-collapsed) {
    max-width: 100%;
    flex: 1 1 auto;
  }

  .property-pair:not(:has(> .property:not(.property-collapsed))) {
    display: none;
  }

  &.dynamic-views-paired-property-column .property-pair .property {
    flex: 1 1 0;
  }

  .property-pair.property-measured .pair-left {
    width: var(--field1-width);
    flex: 0 0 auto;
    max-width: none;
  }

  .property-pair.property-measured .pair-right {
    width: var(--field2-width);
    flex: 0 0 auto;
    max-width: none;
  }

  .property-pair.property-measured .property-content-wrapper {
    flex: 1 1 auto;
    min-width: 0;
  }

  .property-label {
    font-size: var(
      --dynamic-views-property-label-font-size,
      var(--font-ui-smaller)
    );
    font-family: var(--dynamic-views-property-label-font, inherit);
    color: var(--text-faint);
    margin-bottom: var(--size-2-1);
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  .property-label-inline {
    font-size: var(
      --dynamic-views-property-label-font-size,
      var(--font-ui-smaller)
    );
    font-family: var(--dynamic-views-property-label-font, inherit);
    color: var(--text-faint);
    white-space: nowrap;
    flex-shrink: 0;
    z-index: 2;
    background: inherit;
    min-height: var(--dynamic-views-property-content-height, 20px);
    display: flex;
    align-items: center;
  }

  :is(.property-label, .property-label-inline) {
    color: var(--dynamic-views-property-label-color-value, var(--text-faint));
  }

  .property:has(:is(.property-label, .property-label-inline)) {
    color: var(
      --dynamic-views-property-with-label-color-value,
      var(--text-muted)
    );
  }

  .property:not(:has(:is(.property-label, .property-label-inline))) {
    color: var(
      --dynamic-views-property-no-label-color-value,
      var(--text-faint)
    );
  }

  .property a.internal-link {
    color: var(--link-color);
  }
  .property a.external-link {
    color: var(--link-external-color);
  }

  .card-subtitle {
    color: var(--dynamic-views-subtitle-color-value, var(--text-faint));
  }

  .card-text-preview {
    --dynamic-views-text-preview-color: var(
      --dynamic-views-text-preview-color-value,
      var(--text-muted)
    );
  }

  .card-title {
    --dynamic-views-title-color: var(
      --dynamic-views-title-color-value,
      var(--text-normal)
    );
  }
}

/* Property link hover: card (hover intent) */
@media (hover: hover) {
  .dynamic-views .card.hover-intent-active .property a.internal-link:hover {
    color: var(--link-color-hover);
  }
  .dynamic-views .card.hover-intent-active .property a.external-link:hover {
    color: var(--link-external-color-hover);
  }
}

/* Property link hover: list (immediate) */
.dynamic-views .list-properties .property a.internal-link:hover {
  color: var(--link-color-hover);
}
.dynamic-views .list-properties .property a.external-link:hover {
  color: var(--link-external-color-hover);
}

/* Compact mode: reset timestamp icon to left for even fields (edge mode only) */
body:not(.dynamic-views-timestamp-icon-center):not(
    .dynamic-views-timestamp-icon-right
  )
  .dynamic-views
  .card.compact-mode
  .property-pair
  .pair-right
  .timestamp-icon {
  order: 0;
  margin-right: var(--size-2-2);
  margin-left: 0;
}

/* Compact mode: reset timestamp icon to right for even fields (center and right modes) */
body:is(
    .dynamic-views-timestamp-icon-center,
    .dynamic-views-timestamp-icon-right
  )
  .dynamic-views
  .card.compact-mode
  .property-pair
  .pair-right
  .timestamp-icon {
  order: 2;
  margin-right: 0;
  margin-left: var(--size-2-2);
}

/* Right alignment for full-row properties with inline labels - value only */
body.dynamic-views-full-row-align-right
  .dynamic-views
  .card-properties
  > .property:has(.property-label-inline)
  .property-content-wrapper {
  flex: 0 1 auto;
  margin-left: auto;
}

/* Property label case transformations */
body.dynamic-views-property-label-case-lowercase .dynamic-views .property-label,
body.dynamic-views-property-label-case-lowercase
  .dynamic-views
  .property-label-inline {
  text-transform: lowercase;
}

body.dynamic-views-property-label-case-uppercase .dynamic-views .property-label,
body.dynamic-views-property-label-case-uppercase
  .dynamic-views
  .property-label-inline {
  text-transform: uppercase;
}

/* Property label bold */
body.dynamic-views-property-label-bold .dynamic-views .property-label,
body.dynamic-views-property-label-bold .dynamic-views .property-label-inline {
  font-weight: var(--font-semibold);
}

/* Property label small caps */
body.dynamic-views-property-label-small-caps .dynamic-views .property-label,
body.dynamic-views-property-label-small-caps
  .dynamic-views
  .property-label-inline {
  font-variant: small-caps;
}

/* Property label color presets - semantic colors applied at element level via semantic color tokens */
body.dynamic-views-property-label-color-faint
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-faint);
}
body.dynamic-views-property-label-color-muted
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-muted);
}
body.dynamic-views-property-label-color-normal
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--text-normal);
}

body.dynamic-views-property-label-color-accent {
  --dynamic-views-property-label-color-value: var(--text-accent);
}
body.dynamic-views-property-label-color-red {
  --dynamic-views-property-label-color-value: var(--color-red);
}
body.dynamic-views-property-label-color-orange {
  --dynamic-views-property-label-color-value: var(--color-orange);
}
body.dynamic-views-property-label-color-yellow {
  --dynamic-views-property-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-label-color-green {
  --dynamic-views-property-label-color-value: var(--color-green);
}
body.dynamic-views-property-label-color-cyan {
  --dynamic-views-property-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-label-color-blue {
  --dynamic-views-property-label-color-value: var(--color-blue);
}
body.dynamic-views-property-label-color-purple {
  --dynamic-views-property-label-color-value: var(--color-purple);
}
body.dynamic-views-property-label-color-pink {
  --dynamic-views-property-label-color-value: var(--color-pink);
}
body.dynamic-views-property-label-color-custom {
  --dynamic-views-property-label-color-value: var(
    --dynamic-views-property-label-color-custom,
    var(--text-faint)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-property-label-color-custom
  .dynamic-views
  :is(.property-label, .property-label-inline) {
  color: var(--dynamic-views-property-label-color-custom, var(--text-faint));
}

/* Property text color presets - with labels - semantic colors via semantic color tokens */
body.dynamic-views-property-color-with-labels-faint
  .dynamic-views
  .property:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-faint);
}
body.dynamic-views-property-color-with-labels-muted
  .dynamic-views
  .property:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-muted);
}
body.dynamic-views-property-color-with-labels-normal
  .dynamic-views
  .property:has(:is(.property-label, .property-label-inline)) {
  color: var(--text-normal);
}

body.dynamic-views-property-color-with-labels-accent {
  --dynamic-views-property-with-label-color-value: var(--text-accent);
}
body.dynamic-views-property-color-with-labels-red {
  --dynamic-views-property-with-label-color-value: var(--color-red);
}
body.dynamic-views-property-color-with-labels-orange {
  --dynamic-views-property-with-label-color-value: var(--color-orange);
}
body.dynamic-views-property-color-with-labels-yellow {
  --dynamic-views-property-with-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-color-with-labels-green {
  --dynamic-views-property-with-label-color-value: var(--color-green);
}
body.dynamic-views-property-color-with-labels-cyan {
  --dynamic-views-property-with-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-color-with-labels-blue {
  --dynamic-views-property-with-label-color-value: var(--color-blue);
}
body.dynamic-views-property-color-with-labels-purple {
  --dynamic-views-property-with-label-color-value: var(--color-purple);
}
body.dynamic-views-property-color-with-labels-pink {
  --dynamic-views-property-with-label-color-value: var(--color-pink);
}
body.dynamic-views-property-color-with-labels-custom {
  --dynamic-views-property-with-label-color-value: var(
    --dynamic-views-property-color-with-labels-custom,
    var(--text-faint)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-property-color-with-labels-custom
  .dynamic-views
  .property:has(:is(.property-label, .property-label-inline)) {
  color: var(
    --dynamic-views-property-color-with-labels-custom,
    var(--text-faint)
  );
}

/* Property text color presets - without labels - semantic colors via semantic color tokens */
body.dynamic-views-property-color-without-labels-faint
  .dynamic-views
  .property:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-faint);
}
body.dynamic-views-property-color-without-labels-muted
  .dynamic-views
  .property:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-muted);
}
body.dynamic-views-property-color-without-labels-normal
  .dynamic-views
  .property:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(--text-normal);
}

body.dynamic-views-property-color-without-labels-accent {
  --dynamic-views-property-no-label-color-value: var(--text-accent);
}
body.dynamic-views-property-color-without-labels-red {
  --dynamic-views-property-no-label-color-value: var(--color-red);
}
body.dynamic-views-property-color-without-labels-orange {
  --dynamic-views-property-no-label-color-value: var(--color-orange);
}
body.dynamic-views-property-color-without-labels-yellow {
  --dynamic-views-property-no-label-color-value: var(--color-yellow);
}
body.dynamic-views-property-color-without-labels-green {
  --dynamic-views-property-no-label-color-value: var(--color-green);
}
body.dynamic-views-property-color-without-labels-cyan {
  --dynamic-views-property-no-label-color-value: var(--color-cyan);
}
body.dynamic-views-property-color-without-labels-blue {
  --dynamic-views-property-no-label-color-value: var(--color-blue);
}
body.dynamic-views-property-color-without-labels-purple {
  --dynamic-views-property-no-label-color-value: var(--color-purple);
}
body.dynamic-views-property-color-without-labels-pink {
  --dynamic-views-property-no-label-color-value: var(--color-pink);
}
body.dynamic-views-property-color-without-labels-custom {
  --dynamic-views-property-no-label-color-value: var(
    --dynamic-views-property-color-without-labels-custom,
    var(--text-faint)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-property-color-without-labels-custom
  .dynamic-views
  .property:not(:has(:is(.property-label, .property-label-inline))) {
  color: var(
    --dynamic-views-property-color-without-labels-custom,
    var(--text-faint)
  );
}

/* Subtitle color presets - semantic colors applied at element level via semantic color tokens */
body.dynamic-views-subtitle-color-faint .dynamic-views .card-subtitle {
  color: var(--text-faint);
}
body.dynamic-views-subtitle-color-muted .dynamic-views .card-subtitle {
  color: var(--text-muted);
}
body.dynamic-views-subtitle-color-normal .dynamic-views .card-subtitle {
  color: var(--text-normal);
}

body.dynamic-views-subtitle-color-accent {
  --dynamic-views-subtitle-color-value: var(--text-accent);
}
body.dynamic-views-subtitle-color-red {
  --dynamic-views-subtitle-color-value: var(--color-red);
}
body.dynamic-views-subtitle-color-orange {
  --dynamic-views-subtitle-color-value: var(--color-orange);
}
body.dynamic-views-subtitle-color-yellow {
  --dynamic-views-subtitle-color-value: var(--color-yellow);
}
body.dynamic-views-subtitle-color-green {
  --dynamic-views-subtitle-color-value: var(--color-green);
}
body.dynamic-views-subtitle-color-cyan {
  --dynamic-views-subtitle-color-value: var(--color-cyan);
}
body.dynamic-views-subtitle-color-blue {
  --dynamic-views-subtitle-color-value: var(--color-blue);
}
body.dynamic-views-subtitle-color-purple {
  --dynamic-views-subtitle-color-value: var(--color-purple);
}
body.dynamic-views-subtitle-color-pink {
  --dynamic-views-subtitle-color-value: var(--color-pink);
}
body.dynamic-views-subtitle-color-custom {
  --dynamic-views-subtitle-color-value: var(
    --dynamic-views-subtitle-color-custom,
    var(--text-faint)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-subtitle-color-custom .dynamic-views .card-subtitle {
  color: var(--dynamic-views-subtitle-color-custom, var(--text-faint));
}

/* Text preview color presets - semantic colors applied at element level via semantic color tokens */
body.dynamic-views-text-preview-color-faint .dynamic-views .card-text-preview {
  color: var(--text-faint);
}
body.dynamic-views-text-preview-color-muted .dynamic-views .card-text-preview {
  color: var(--text-muted);
}
body.dynamic-views-text-preview-color-normal .dynamic-views .card-text-preview {
  color: var(--text-normal);
}

body.dynamic-views-text-preview-color-accent {
  --dynamic-views-text-preview-color-value: var(--text-accent);
}
body.dynamic-views-text-preview-color-red {
  --dynamic-views-text-preview-color-value: var(--color-red);
}
body.dynamic-views-text-preview-color-orange {
  --dynamic-views-text-preview-color-value: var(--color-orange);
}
body.dynamic-views-text-preview-color-yellow {
  --dynamic-views-text-preview-color-value: var(--color-yellow);
}
body.dynamic-views-text-preview-color-green {
  --dynamic-views-text-preview-color-value: var(--color-green);
}
body.dynamic-views-text-preview-color-cyan {
  --dynamic-views-text-preview-color-value: var(--color-cyan);
}
body.dynamic-views-text-preview-color-blue {
  --dynamic-views-text-preview-color-value: var(--color-blue);
}
body.dynamic-views-text-preview-color-purple {
  --dynamic-views-text-preview-color-value: var(--color-purple);
}
body.dynamic-views-text-preview-color-pink {
  --dynamic-views-text-preview-color-value: var(--color-pink);
}
body.dynamic-views-text-preview-color-custom {
  --dynamic-views-text-preview-color-value: var(
    --dynamic-views-text-preview-color-custom,
    var(--text-muted)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-text-preview-color-custom .dynamic-views .card-text-preview {
  color: var(--dynamic-views-text-preview-color-custom, var(--text-muted));
}

/* Title color presets - semantic colors applied at element level via semantic color tokens */
body.dynamic-views-title-color-faint .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-faint);
}
body.dynamic-views-title-color-muted .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-muted);
}
body.dynamic-views-title-color-normal .dynamic-views .card-title {
  --dynamic-views-title-color: var(--text-normal);
}

body.dynamic-views-title-color-accent {
  --dynamic-views-title-color-value: var(--text-accent);
}
body.dynamic-views-title-color-red {
  --dynamic-views-title-color-value: var(--color-red);
}
body.dynamic-views-title-color-orange {
  --dynamic-views-title-color-value: var(--color-orange);
}
body.dynamic-views-title-color-yellow {
  --dynamic-views-title-color-value: var(--color-yellow);
}
body.dynamic-views-title-color-green {
  --dynamic-views-title-color-value: var(--color-green);
}
body.dynamic-views-title-color-cyan {
  --dynamic-views-title-color-value: var(--color-cyan);
}
body.dynamic-views-title-color-blue {
  --dynamic-views-title-color-value: var(--color-blue);
}
body.dynamic-views-title-color-purple {
  --dynamic-views-title-color-value: var(--color-purple);
}
body.dynamic-views-title-color-pink {
  --dynamic-views-title-color-value: var(--color-pink);
}
body.dynamic-views-title-color-custom {
  --dynamic-views-title-color-value: var(
    --dynamic-views-title-color-custom,
    var(--text-normal)
  );
}
/* Custom fallback via semantic color tokens */
body.dynamic-views-title-color-custom .dynamic-views .card-title {
  --dynamic-views-title-color: var(
    --dynamic-views-title-color-custom,
    var(--text-normal)
  );
}
